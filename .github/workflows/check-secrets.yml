name: Check Deployment Secrets

on:
  workflow_dispatch:  # Manual trigger only

jobs:
  check-secrets:
    name: Verify deployment secrets are configured
    runs-on: ubuntu-latest

    steps:
      - name: Check SSH_HOST
        run: |
          if [ -z "${{ secrets.SSH_HOST }}" ]; then
            echo "‚ùå SSH_HOST is not set"
            exit 1
          else
            echo "‚úÖ SSH_HOST is set: ${{ secrets.SSH_HOST }}"
          fi

      - name: Check SSH_USER
        run: |
          if [ -z "${{ secrets.SSH_USER }}" ]; then
            echo "‚ùå SSH_USER is not set"
            exit 1
          else
            echo "‚úÖ SSH_USER is set: ${{ secrets.SSH_USER }}"
          fi

      - name: Check SSH_PRIVATE_KEY
        run: |
          if [ -z "${{ secrets.SSH_PRIVATE_KEY }}" ]; then
            echo "‚ùå SSH_PRIVATE_KEY is not set"
            exit 1
          else
            echo "‚úÖ SSH_PRIVATE_KEY is set (length: ${#SSH_KEY})"
          fi
        env:
          SSH_KEY: ${{ secrets.SSH_PRIVATE_KEY }}

      - name: Check DEPLOY_PATH_TEST
        run: |
          if [ -z "${{ secrets.DEPLOY_PATH_TEST }}" ]; then
            echo "‚ùå DEPLOY_PATH_TEST is not set"
            exit 1
          else
            echo "‚úÖ DEPLOY_PATH_TEST is set: ${{ secrets.DEPLOY_PATH_TEST }}"
          fi

      - name: Check DEPLOY_PATH_PROD
        run: |
          if [ -z "${{ secrets.DEPLOY_PATH_PROD }}" ]; then
            echo "‚ùå DEPLOY_PATH_PROD is not set"
            exit 1
          else
            echo "‚úÖ DEPLOY_PATH_PROD is set: ${{ secrets.DEPLOY_PATH_PROD }}"
          fi

      - name: All Secrets Configured
        run: |
          echo "üéâ All required secrets are configured!"
          echo "You can now use the deployment workflows."
